window.NwsApi=(()=>{"use strict";var t={878:(t,a,s)=>{s.r(a),s.d(a,{Alerts:()=>r,Forecasts:()=>i,Products:()=>e});class r{constructor(t=null,a=null){this._baseUrl="https://api.weather.gov/",this._alertsUrl="alerts",this._activeUrl="/active",this._zoneUrl="/zone",this._pil=a,this._zone=t,this._productArray=null}async byPil(t,a,...s){let r=[];if(this._productArray.features.forEach((t=>{t.properties.parameters.PIL.includes(this._pil)&&r.push(t)})),!a)return r;a(r,...s)}async getAlertsByZone(t,...a){if(!this._zone)return!1;{var s=this._baseUrl+this._alertsUrl+this._activeUrl+this._zoneUrl+"/"+this._zone;const i=await fetch(s);var r=await i.json();if(this._productArray=r,null!==this._pil&&(r=await this.byPil()),!t)return r;t(r,...a)}}}class i{constructor(t,a){this._baseUrl="https://api.weather.gov/",this._pointsUrl="points/",this._gridpointsUrl="gridpoints/",this._fcstHourlyUrl="forecast/hourly",this._fcstSummaryUrl="forecast",this._lat=t,this._lon=a,this._metaData=null,this._rawForecast=null,this._summaryForecast=null,this._hourlyForecast=null}async getRawForecast(t,...a){if(this._rawForecast||await this.queryAPIRawForecast(),!t)return this._rawForecast;t(json,...a)}async getHourlyForecast(t,...a){if(this._hourlyForecast||await this.queryAPIHourlyForecast(),!t)return this._hourlyForecast;t(json,...a)}async getSummaryForecast(t,...a){if(this._summaryForecast||await this.queryAPISummaryForecast(),!t)return this._summaryForecast;t(json,...a)}async getMetaData(){return this._metaData||await this.queryAPIPointMetaData(),this._metaData}get gridX(){return this._metaData.properties.gridX}get gridY(){return this._metaData.properties.gridY}get cwa(){return this._metaData.properties.cwa}async queryAPIPointMetaData(){var t=this,a=this._baseUrl+this._pointsUrl+this._lat+","+this._lon;await $.ajax({url:a,dataType:"json",method:"GET",success:function(a){t._metaData=a}})}async queryAPIRawForecast(t,...a){this._metaData||await this.queryAPIPointMetaData();var s=this._baseUrl+this._gridpointsUrl+this.cwa+"/"+this.gridX+","+this.gridY;const r=await fetch(s),i=await r.json();this._rawForecast=i}async queryAPIHourlyForecast(t,...a){this._metaData||await this.queryAPIPointMetaData();var s=this._baseUrl+this._gridpointsUrl+this.cwa+"/"+this.gridX+","+this.gridY+"/"+this._fcstHourlyUrl;const r=await fetch(s),i=await r.json();this._hourlyForecast=i}async queryAPISummaryForecast(t,...a){this._metaData||await this.queryAPIPointMetaData();var s=this._baseUrl+this._gridpointsUrl+this.cwa+"/"+this.gridX+","+this.gridY+"/"+this._fcstSummaryUrl;const r=await fetch(s),i=await r.json();this._summaryForecast=i}async getForecasts(t,a,...s){let r={};if(t.includes("raw")&&(r.raw=await this.getRawForecast()),t.includes("hourly")&&(r.hourly=await this.getHourlyForecast()),t.includes("summary")&&(r.summary=await this.getSummaryForecast()),!a)return r;a(r,...s)}async getRawWeatherDataBetweenPeriods(t,a,s){this._rawForecast||await this.getRawForecast();let r=this._rawForecast.properties[t].values,i=[],e=[],o=!1;return"quantitativePrecipitation"==t&&(o="split"),r.forEach((t=>{i=i.concat(this.hourlyForecastFromRaw(t,o))})),e=i.filter((t=>{if(t.startDate>=a&&t.endDate<=s)return!0})),e}}class e{constructor(t=null,a=null,s=!1,r=!1,i=!1,e=!1){this._baseUrl="https://api.weather.gov/",this._productsUrl="products",this._locationsUrl="/locations",this._typesUrl="/types",this._type=t,this._wfo=a,this._idx=s,this._limit=r,this._startDate=i,this._endDate=e,this._productArray=null}async byIndex(t,a,...s){let r={};if(0!==this._productArray["@graph"].length){var i=this._productArray["@graph"][this._idx]["@id"];const t=await fetch(i);r=await t.json()}if(!a)return r;a(r,...s)}async bySubset(t,a,...s){let r=[],i=this._productArray["@graph"];if(0!==i.length&&(this._startDate&&(i=i.filter((t=>this._startDate<new Date(t.issuanceTime)))),this._endDate&&(i=i.filter((t=>this._endDate>new Date(t.issuanceTime)))),this._limit&&(i=i.slice(0,this._limit)),r=await Promise.all(i.map((async t=>{var a=t["@id"];return(await fetch(a)).json()})))),!a)return r;a(r,...s)}async getProductsByLocationAndType(t,...a){if(!this._type||!this._wfo)return!1;{var s=this._baseUrl+this._productsUrl+this._typesUrl+"/"+this._type+this._locationsUrl+"/"+this._wfo;const i=await fetch(s);var r=await i.json();let e;if(this._productArray=r,e=!1!==this._idx?await this.byIndex():await this.bySubset(),!t)return e;t(e,...a)}}}console.log(r),console.log("TEST1"),console.log(new r),console.log("TEST2")}},a={};function s(r){if(a[r])return a[r].exports;var i=a[r]={exports:{}};return t[r](i,i.exports,s),i.exports}return s.d=(t,a)=>{for(var r in a)s.o(a,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},s.o=(t,a)=>Object.prototype.hasOwnProperty.call(t,a),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(878)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Od3NBcGkvLi9zcmMvanMvQWxlcnRzLmpzIiwid2VicGFjazovL053c0FwaS8uL3NyYy9qcy9Gb3JlY2FzdHMuanMiLCJ3ZWJwYWNrOi8vTndzQXBpLy4vc3JjL2pzL1Byb2R1Y3RzLmpzIiwid2VicGFjazovL053c0FwaS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9Od3NBcGkvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vTndzQXBpL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9Od3NBcGkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL053c0FwaS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL053c0FwaS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sIm5hbWVzIjpbIkFsZXJ0cyIsInpvbmUiLCJwaWwiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfYWxlcnRzVXJsIiwiX2FjdGl2ZVVybCIsIl96b25lVXJsIiwiX3BpbCIsIl96b25lIiwiX3Byb2R1Y3RBcnJheSIsImNhbGxiYWNrIiwiYXJncyIsImFyciIsImZlYXR1cmVzIiwiZm9yRWFjaCIsInByb2QiLCJwcm9wZXJ0aWVzIiwicGFyYW1ldGVycyIsIlBJTCIsImluY2x1ZGVzIiwicHVzaCIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwiYnlQaWwiLCJGb3JlY2FzdHMiLCJsYXQiLCJsb24iLCJfcG9pbnRzVXJsIiwiX2dyaWRwb2ludHNVcmwiLCJfZmNzdEhvdXJseVVybCIsIl9mY3N0U3VtbWFyeVVybCIsIl9sYXQiLCJfbG9uIiwiX21ldGFEYXRhIiwiX3Jhd0ZvcmVjYXN0IiwiX3N1bW1hcnlGb3JlY2FzdCIsIl9ob3VybHlGb3JlY2FzdCIsInF1ZXJ5QVBJUmF3Rm9yZWNhc3QiLCJxdWVyeUFQSUhvdXJseUZvcmVjYXN0IiwicXVlcnlBUElTdW1tYXJ5Rm9yZWNhc3QiLCJxdWVyeUFQSVBvaW50TWV0YURhdGEiLCJncmlkWCIsImdyaWRZIiwiY3dhIiwic2VsZiIsIiQiLCJhamF4IiwiZGF0YVR5cGUiLCJtZXRob2QiLCJzdWNjZXNzIiwiZGF0YSIsInR5cGVzIiwiZm9yZWNhc3REYXRhIiwiZ2V0UmF3Rm9yZWNhc3QiLCJnZXRIb3VybHlGb3JlY2FzdCIsImdldFN1bW1hcnlGb3JlY2FzdCIsImVsZW1lbnQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicmF3RmNzdERhdGEiLCJ2YWx1ZXMiLCJob3VybHlGY3N0RGF0YSIsInZhbGlkSG91cmx5RmNzdERhdGEiLCJjYWxjTWV0aG9kIiwicmF3RmNzdCIsImNvbmNhdCIsImhvdXJseUZvcmVjYXN0RnJvbVJhdyIsImZpbHRlciIsImZjc3QiLCJQcm9kdWN0cyIsInR5cGUiLCJ3Zm8iLCJpZHgiLCJsaW1pdCIsIl9wcm9kdWN0c1VybCIsIl9sb2NhdGlvbnNVcmwiLCJfdHlwZXNVcmwiLCJfdHlwZSIsIl93Zm8iLCJfaWR4IiwiX2xpbWl0IiwiX3N0YXJ0RGF0ZSIsIl9lbmREYXRlIiwibGVuZ3RoIiwicHJvZEFycmF5IiwicHJvZHVjdCIsIkRhdGUiLCJpc3N1YW5jZVRpbWUiLCJzbGljZSIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJhc3luYyIsInByb2R1Y3RzIiwiYnlJbmRleCIsImJ5U3Vic2V0IiwiY29uc29sZSIsImxvZyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZh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LFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VQLEVBQW9CUSxFQUFJLENBQUNLLEVBQUtDLElBQVNMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2pGZCxFQUFvQmtCLEVBQUtoQixJQUNILG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDWCxPQUFPQyxlQUFlUixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEWixPQUFPQyxlQUFlUixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0hGaERyQixFQUFvQixNIiwiZmlsZSI6Ik53c0FwaS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGVydHMgIHtcblx0XG5cdGNvbnN0cnVjdG9yKHpvbmUgPSBudWxsLHBpbCA9IG51bGwpIHtcblx0XHR0aGlzLl9iYXNlVXJsID0gJ2h0dHBzOi8vYXBpLndlYXRoZXIuZ292Lyc7XG5cdFx0dGhpcy5fYWxlcnRzVXJsID0gJ2FsZXJ0cydcblx0XHR0aGlzLl9hY3RpdmVVcmwgPSAnL2FjdGl2ZSdcblx0XHR0aGlzLl96b25lVXJsID0gJy96b25lJztcblx0XHR0aGlzLl9waWwgPSBwaWw7XG5cdFx0dGhpcy5fem9uZSA9IHpvbmU7XG5cdFx0dGhpcy5fcHJvZHVjdEFycmF5ID0gbnVsbFxuXHR9XG5cblx0YXN5bmMgYnlQaWwocGlsLGNhbGxiYWNrLC4uLmFyZ3Mpe1xuXHRcdGxldCBhcnIgPSBbXTtcblx0XHR0aGlzLl9wcm9kdWN0QXJyYXkuZmVhdHVyZXMuZm9yRWFjaCggcHJvZCA9PiB7IFxuXHRcdFx0aWYgKHByb2QucHJvcGVydGllcy5wYXJhbWV0ZXJzLlBJTC5pbmNsdWRlcyh0aGlzLl9waWwpKSB7XG5cdFx0XHRcdGFyci5wdXNoKHByb2QpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChjYWxsYmFjaykgeyBjYWxsYmFjayhhcnIsLi4uYXJncyk7IH1cblx0XHRlbHNlIHsgcmV0dXJuIGFycjsgfVxuXHR9XG5cblx0YXN5bmMgZ2V0QWxlcnRzQnlab25lKGNhbGxiYWNrLC4uLmFyZ3Mpe1xuXHRcdGlmICh0aGlzLl96b25lKXtcblx0XHRcdHZhciB1cmwgPSB0aGlzLl9iYXNlVXJsK3RoaXMuX2FsZXJ0c1VybCt0aGlzLl9hY3RpdmVVcmwrdGhpcy5fem9uZVVybCsnLycrdGhpcy5fem9uZVxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpXG5cdFx0XHR2YXIganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdHRoaXMuX3Byb2R1Y3RBcnJheSA9IGpzb247XG5cdFx0XHRpZiAodGhpcy5fcGlsICE9PSBudWxsKSB7IGpzb24gPSBhd2FpdCB0aGlzLmJ5UGlsKCkgfVxuXHRcdFx0aWYgKGNhbGxiYWNrKSB7IGNhbGxiYWNrKGpzb24sLi4uYXJncyk7IH1cblx0XHRcdGVsc2UgeyByZXR1cm4ganNvbjsgfVxuXHRcdH1cblx0XHRlbHNlIHsgcmV0dXJuIGZhbHNlOyB9XG5cdH1cbn1cbiIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9yZWNhc3RzIHtcblxuXHRjb25zdHJ1Y3RvcihsYXQsbG9uKSB7XG5cdFx0dGhpcy5fYmFzZVVybCA9ICdodHRwczovL2FwaS53ZWF0aGVyLmdvdi8nO1xuXHRcdHRoaXMuX3BvaW50c1VybCA9ICdwb2ludHMvJztcblx0XHR0aGlzLl9ncmlkcG9pbnRzVXJsID0gJ2dyaWRwb2ludHMvJztcblx0XHR0aGlzLl9mY3N0SG91cmx5VXJsID0gJ2ZvcmVjYXN0L2hvdXJseSc7XG5cdFx0dGhpcy5fZmNzdFN1bW1hcnlVcmwgPSAnZm9yZWNhc3QnO1xuXHRcblx0XHR0aGlzLl9sYXQgPSBsYXQ7XG5cdFx0dGhpcy5fbG9uID0gbG9uO1xuXHRcdHRoaXMuX21ldGFEYXRhID0gbnVsbDtcblx0XHR0aGlzLl9yYXdGb3JlY2FzdCA9IG51bGw7XG5cdFx0dGhpcy5fc3VtbWFyeUZvcmVjYXN0ID0gbnVsbDtcblx0XHR0aGlzLl9ob3VybHlGb3JlY2FzdCA9IG51bGw7XG5cdH1cblxuXHRhc3luYyBnZXRSYXdGb3JlY2FzdChjYWxsYmFjaywuLi5hcmdzKXtcblx0XHRpZiAoIXRoaXMuX3Jhd0ZvcmVjYXN0KXsgYXdhaXQgdGhpcy5xdWVyeUFQSVJhd0ZvcmVjYXN0KCk7IH1cblx0XHRpZiAoY2FsbGJhY2spICB7IGNhbGxiYWNrKGpzb24sLi4uYXJncyk7IH1cblx0XHRlbHNlIHsgcmV0dXJuIHRoaXMuX3Jhd0ZvcmVjYXN0OyB9XG5cdH1cblx0YXN5bmMgZ2V0SG91cmx5Rm9yZWNhc3QoY2FsbGJhY2ssLi4uYXJncyl7XG5cdFx0aWYgKCF0aGlzLl9ob3VybHlGb3JlY2FzdCl7IGF3YWl0IHRoaXMucXVlcnlBUElIb3VybHlGb3JlY2FzdCgpOyB9XG5cdFx0aWYgKGNhbGxiYWNrKSAgeyBjYWxsYmFjayhqc29uLC4uLmFyZ3MpOyB9XG5cdFx0ZWxzZSB7IHJldHVybiB0aGlzLl9ob3VybHlGb3JlY2FzdDsgfVxuXHR9XG5cdGFzeW5jIGdldFN1bW1hcnlGb3JlY2FzdChjYWxsYmFjaywuLi5hcmdzKXtcblx0XHRpZiAoIXRoaXMuX3N1bW1hcnlGb3JlY2FzdCl7IGF3YWl0IHRoaXMucXVlcnlBUElTdW1tYXJ5Rm9yZWNhc3QoKTsgfVxuXHRcdGlmIChjYWxsYmFjaykgIHsgY2FsbGJhY2soanNvbiwuLi5hcmdzKTsgfVxuXHRcdGVsc2UgeyByZXR1cm4gdGhpcy5fc3VtbWFyeUZvcmVjYXN0OyB9XG5cdH1cblx0YXN5bmMgZ2V0TWV0YURhdGEoKXtcblx0XHRpZiAoIXRoaXMuX21ldGFEYXRhKXsgYXdhaXQgdGhpcy5xdWVyeUFQSVBvaW50TWV0YURhdGEoKTtcdH1cblx0XHRyZXR1cm4gdGhpcy5fbWV0YURhdGE7IFxuXHR9XG5cdFxuXHRnZXQgZ3JpZFgoKSB7IHJldHVybiB0aGlzLl9tZXRhRGF0YS5wcm9wZXJ0aWVzLmdyaWRYOyB9XG5cdGdldCBncmlkWSgpIHsgcmV0dXJuIHRoaXMuX21ldGFEYXRhLnByb3BlcnRpZXMuZ3JpZFk7IH1cblx0Z2V0IGN3YSgpIHsgcmV0dXJuIHRoaXMuX21ldGFEYXRhLnByb3BlcnRpZXMuY3dhOyB9XG5cblx0YXN5bmMgcXVlcnlBUElQb2ludE1ldGFEYXRhKCkge1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHR2YXIgdXJsID0gdGhpcy5fYmFzZVVybCt0aGlzLl9wb2ludHNVcmwrdGhpcy5fbGF0KycsJyt0aGlzLl9sb247XG5cdFx0YXdhaXQgJC5hamF4KHtcblx0XHRcdHVybDogdXJsLFxuXHRcdFx0ZGF0YVR5cGU6ICdqc29uJyxcblx0XHRcdG1ldGhvZDonR0VUJyxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpeyBcblx0XHRcdFx0c2VsZi5fbWV0YURhdGEgPSBkYXRhOyBcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblx0YXN5bmMgcXVlcnlBUElSYXdGb3JlY2FzdChjYWxsYmFjaywuLi5hcmdzKSB7XG5cdFx0aWYgKCF0aGlzLl9tZXRhRGF0YSl7IGF3YWl0IHRoaXMucXVlcnlBUElQb2ludE1ldGFEYXRhKCk7XHR9XG5cdFx0dmFyIHVybCA9IHRoaXMuX2Jhc2VVcmwrdGhpcy5fZ3JpZHBvaW50c1VybCt0aGlzLmN3YSsnLycrdGhpcy5ncmlkWCsnLCcrdGhpcy5ncmlkWVxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKVxuXHRcdGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cdFx0dGhpcy5fcmF3Rm9yZWNhc3QgPSBqc29uIFxuXHR9XG5cdGFzeW5jIHF1ZXJ5QVBJSG91cmx5Rm9yZWNhc3QoY2FsbGJhY2ssLi4uYXJncykge1xuXHRcdGlmICghdGhpcy5fbWV0YURhdGEpeyBhd2FpdCB0aGlzLnF1ZXJ5QVBJUG9pbnRNZXRhRGF0YSgpO1x0fVxuXHRcdHZhciB1cmwgPSB0aGlzLl9iYXNlVXJsK3RoaXMuX2dyaWRwb2ludHNVcmwrdGhpcy5jd2ErJy8nK3RoaXMuZ3JpZFgrJywnK3RoaXMuZ3JpZFkrJy8nK3RoaXMuX2Zjc3RIb3VybHlVcmw7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpXG5cdFx0Y29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHR0aGlzLl9ob3VybHlGb3JlY2FzdCA9IGpzb24gXG5cdH1cblx0YXN5bmMgcXVlcnlBUElTdW1tYXJ5Rm9yZWNhc3QoY2FsbGJhY2ssLi4uYXJncykge1xuXHRcdGlmICghdGhpcy5fbWV0YURhdGEpeyBhd2FpdCB0aGlzLnF1ZXJ5QVBJUG9pbnRNZXRhRGF0YSgpO1x0fVxuXHRcdHZhciB1cmwgPSB0aGlzLl9iYXNlVXJsK3RoaXMuX2dyaWRwb2ludHNVcmwrdGhpcy5jd2ErJy8nK3RoaXMuZ3JpZFgrJywnK3RoaXMuZ3JpZFkrJy8nK3RoaXMuX2Zjc3RTdW1tYXJ5VXJsO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKVxuXHRcdGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cdFx0dGhpcy5fc3VtbWFyeUZvcmVjYXN0ID0ganNvbiBcblx0fVxuXHRhc3luYyBnZXRGb3JlY2FzdHModHlwZXMsY2FsbGJhY2ssLi4uYXJncykge1xuXHRcdGxldCBmb3JlY2FzdERhdGEgPSB7fVxuXHRcdGlmICh0eXBlcy5pbmNsdWRlcygncmF3JykpIHsgZm9yZWNhc3REYXRhWydyYXcnXSA9IGF3YWl0IHRoaXMuZ2V0UmF3Rm9yZWNhc3QoKTsgfVxuXHRcdGlmICh0eXBlcy5pbmNsdWRlcygnaG91cmx5JykpIHsgZm9yZWNhc3REYXRhWydob3VybHknXSA9IGF3YWl0IHRoaXMuZ2V0SG91cmx5Rm9yZWNhc3QoKTsgfVxuXHRcdGlmICh0eXBlcy5pbmNsdWRlcygnc3VtbWFyeScpKSB7IGZvcmVjYXN0RGF0YVsnc3VtbWFyeSddID0gYXdhaXQgdGhpcy5nZXRTdW1tYXJ5Rm9yZWNhc3QoKTsgfVxuXHRcdGlmIChjYWxsYmFjaykgIHsgY2FsbGJhY2soZm9yZWNhc3REYXRhLC4uLmFyZ3MpOyB9XG5cdFx0ZWxzZSB7IHJldHVybiBmb3JlY2FzdERhdGEgfVxuXHR9XG5cblx0YXN5bmMgZ2V0UmF3V2VhdGhlckRhdGFCZXR3ZWVuUGVyaW9kcyhlbGVtZW50LHN0YXJ0RGF0ZSxlbmREYXRlKXtcblx0XHRpZiAoIXRoaXMuX3Jhd0ZvcmVjYXN0KXsgYXdhaXQgdGhpcy5nZXRSYXdGb3JlY2FzdCgpO1x0fVxuXHRcdGxldCByYXdGY3N0RGF0YSA9IHRoaXMuX3Jhd0ZvcmVjYXN0LnByb3BlcnRpZXNbZWxlbWVudF0udmFsdWVzO1xuXHRcdGxldCBob3VybHlGY3N0RGF0YSA9IFtdO1xuXHRcdGxldCB2YWxpZEhvdXJseUZjc3REYXRhID0gW107XG5cdFx0bGV0IGNhbGNNZXRob2QgPSBmYWxzZTtcblx0XHRpZiAoZWxlbWVudCA9PSAncXVhbnRpdGF0aXZlUHJlY2lwaXRhdGlvbicpIHsgY2FsY01ldGhvZCA9ICdzcGxpdCc7IH1cblx0XHRyYXdGY3N0RGF0YS5mb3JFYWNoKCByYXdGY3N0ID0+IHtcblx0XHRcdFxuXHRcdFx0aG91cmx5RmNzdERhdGEgPSBob3VybHlGY3N0RGF0YS5jb25jYXQodGhpcy5ob3VybHlGb3JlY2FzdEZyb21SYXcocmF3RmNzdCxjYWxjTWV0aG9kKSk7XG5cdFx0fSk7XG5cdFx0XG5cdFx0dmFsaWRIb3VybHlGY3N0RGF0YSA9IGhvdXJseUZjc3REYXRhLmZpbHRlcigoZmNzdCkgPT4ge1xuXHRcdFx0aWYgKChmY3N0LnN0YXJ0RGF0ZSA+PSBzdGFydERhdGUpICYmIChmY3N0LmVuZERhdGUgPD0gZW5kRGF0ZSkpIHsgcmV0dXJuIHRydWU7IH1cblx0XHR9KVxuXHRcdHJldHVybiB2YWxpZEhvdXJseUZjc3REYXRhO1xuXHR9XG5cdFxuLypcdGhvdXJseVRpbWVzQmV0d2VlbihzdGFydERhdGUsZW5kRGF0ZSl7XG5cdFx0bGV0IGRlc2lyZWRGb3JlY2FzdERhdGVzID0gW107XG5cdFx0bGV0IGhvdXJseURhdGUgPSBzdGFydERhdGU7IFxuXHRcdHdoaWxlIChob3VybHlEYXRlIDwgZW5kRGF0ZSl7XG5cdFx0XHRkZXNpcmVkRm9yZWNhc3REYXRlcy5wdXNoKG5ldyBEYXRlKGhvdXJseURhdGUpKVxuXHRcdFx0aG91cmx5RGF0ZSA9IG5ldyBEYXRlKGhvdXJseURhdGUuc2V0SG91cnMoaG91cmx5RGF0ZS5nZXRIb3VycygpICsgMSkpO1xuXHRcdH1cblx0XHRyZXR1cm4gZGVzaXJlZEZvcmVjYXN0RGF0ZXM7XG5cdH0qL1xuXG4vKlx0aG91cmx5Rm9yZWNhc3RGcm9tUmF3KHd4RGF0YSxjYWxjKXtcblx0XHRsZXQgd3hEYXRhVGltZVBlcmlvZCA9IHRoaXMuZGVjb2RlUmF3Rm9yZWNhc3RUaW1lUGVyaW9kKHd4RGF0YS52YWxpZFRpbWUpXG5cdFx0bGV0IGhvdXJseUZvcmVjYXN0RGF0YSA9IFtdO1xuXHRcdGxldCBob3VybHlEYXRlID0gd3hEYXRhVGltZVBlcmlvZC5zdGFydERhdGU7XG5cdFx0bGV0IGhvdXJseVZhbHVlO1xuXHRcdGlmIChjYWxjID09ICdzcGxpdCcpIHsgaG91cmx5VmFsdWUgPSB3eERhdGEudmFsdWUgLyB3eERhdGFUaW1lUGVyaW9kLmR1cmF0aW9uOyB9XG5cdFx0ZWxzZSB7IGhvdXJseVZhbHVlID0gd3hEYXRhLnZhbHVlOyB9XG5cdFx0d2hpbGUgKGhvdXJseURhdGUgPCB3eERhdGFUaW1lUGVyaW9kLmVuZERhdGUpe1xuXHRcdFx0bGV0IGhvdXJseVN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGhvdXJseURhdGUpO1xuXHRcdFx0aG91cmx5RGF0ZSA9IG5ldyBEYXRlKGhvdXJseURhdGUuc2V0SG91cnMoaG91cmx5RGF0ZS5nZXRIb3VycygpICsgMSkpXG5cdFx0XHRsZXQgaG91cmx5RW5kRGF0ZSA9IG5ldyBEYXRlKGhvdXJseURhdGUpOyBcblx0XHRcdGhvdXJseUZvcmVjYXN0RGF0YS5wdXNoKHtcblx0XHRcdFx0c3RhcnREYXRlIDogaG91cmx5U3RhcnREYXRlLFxuXHRcdFx0XHRlbmREYXRlIDogaG91cmx5RW5kRGF0ZSxcblx0XHRcdFx0dmFsdWUgOiBob3VybHlWYWx1ZVxuXHRcdFx0fSlcblx0XHR9XG5cdFx0cmV0dXJuIGhvdXJseUZvcmVjYXN0RGF0YTtcblx0fVxuXHRcblxuXHRkZWNvZGVSYXdGb3JlY2FzdFRpbWVQZXJpb2QodmFsaWRUaW1lKXtcblx0XHRsZXQgc3RhcnQgPSB2YWxpZFRpbWUuc3BsaXQoJy8nKVswXTtcblx0XHRsZXQgZHVyYXRpb24gPSB2YWxpZFRpbWUuc3BsaXQoJy8nKVsxXTtcblx0XHRkdXJhdGlvbiA9IHBhcnNlSW50KGR1cmF0aW9uLnN1YnN0cmluZyhkdXJhdGlvbi5sYXN0SW5kZXhPZihcIlRcIikgKyAxLGR1cmF0aW9uLmxhc3RJbmRleE9mKFwiSFwiKSkpXG5cdFx0bGV0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0KTtcblx0XHRsZXQgZW5kRGF0ZSA9IG5ldyBEYXRlKHN0YXJ0KTtcblx0XHRlbmREYXRlLnNldEhvdXJzKGVuZERhdGUuZ2V0SG91cnMoKStkdXJhdGlvbik7XG5cdFx0cmV0dXJuIHtcInN0YXJ0RGF0ZVwiOiBzdGFydERhdGUsIFwiZW5kRGF0ZVwiOiBlbmREYXRlLCBcImR1cmF0aW9uXCI6IGR1cmF0aW9uIH07XG5cdH0qL1xuXG5cblxuXHRcbi8vXHRcdGNvbnN0IHN1bW1hcnlGY3N0ID0gYXdhaXQgdGhpcy5zdW1tYXJoeUZvcmVjYXN0KCk7XG4vL1x0XHRpZiAoIXRoaXMuX21ldGFEYXRhKXsgYXdhaXQgdGhpcy5hcGlQb2ludE1ldGFEYXRhKCk7XHR9XG4vL1x0XHR2YXIgdXJsID0gdGhpcy5fYmFzZVVybCt0aGlzLl9ncmlkcG9pbnRzVXJsK3RoaXMuX2N3YSsnLycrdGhpcy5fZ3JpZFgrJywnK3RoaXMuX2dyaWRZKycvJyt0aGlzLl9mY3N0U3VtbWFyeVVybDtcbi8vXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKVxuLy9cdFx0Y29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbi8vXHRcdGNhbGxiYWNrKGpzb24sLi4uYXJncylcbi8vXHR9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9kdWN0cyB7XG5cdFxuXHRjb25zdHJ1Y3Rvcih0eXBlID0gbnVsbCwgd2ZvID0gbnVsbCwgaWR4ID0gZmFsc2UsIGxpbWl0ID0gZmFsc2UsIHN0YXJ0RGF0ZSA9IGZhbHNlLCBlbmREYXRlID0gZmFsc2UpIHtcblx0XHR0aGlzLl9iYXNlVXJsID0gJ2h0dHBzOi8vYXBpLndlYXRoZXIuZ292Lyc7XG5cdFx0dGhpcy5fcHJvZHVjdHNVcmwgPSAncHJvZHVjdHMnXG5cdFx0dGhpcy5fbG9jYXRpb25zVXJsID0gJy9sb2NhdGlvbnMnXG5cdFx0dGhpcy5fdHlwZXNVcmwgPSAnL3R5cGVzJztcblxuXHRcdHRoaXMuX3R5cGUgPSB0eXBlO1xuXHRcdHRoaXMuX3dmbyA9IHdmbztcblx0XHR0aGlzLl9pZHggPSBpZHg7XG5cdFx0dGhpcy5fbGltaXQgPSBsaW1pdDtcblx0XHR0aGlzLl9zdGFydERhdGUgPSBzdGFydERhdGU7XG5cdFx0dGhpcy5fZW5kRGF0ZSA9IGVuZERhdGU7XG5cdFx0dGhpcy5fcHJvZHVjdEFycmF5ID0gbnVsbFxuXHR9XG5cblx0Ly9SZXR1cm5zIGEgc2luZ2xlIHByb2R1Y3QgYnkgYW4gaW5kZXhcblx0YXN5bmMgYnlJbmRleChpZHgsY2FsbGJhY2ssLi4uYXJncyl7XG5cdFx0bGV0IGpzb24gPSB7fTtcblx0XHRpZiAodGhpcy5fcHJvZHVjdEFycmF5WydAZ3JhcGgnXS5sZW5ndGggIT09IDApIHtcblx0XHRcdHZhciB1cmwgPSB0aGlzLl9wcm9kdWN0QXJyYXlbJ0BncmFwaCddW3RoaXMuX2lkeF1bJ0BpZCddO1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpXG5cdFx0XHRqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXHRcdH1cblx0XHRpZiAoY2FsbGJhY2spICB7IGNhbGxiYWNrKGpzb24sLi4uYXJncyk7IH1cblx0XHRlbHNlIHsgcmV0dXJuIGpzb247IH1cblx0fVxuXG5cdC8vUmV0dXJucyBhbGwgb3IgYSBzdWJzZXQgb2YgdGhlIHByb2R1Y3RzXG5cdGFzeW5jIGJ5U3Vic2V0KGlkeCxjYWxsYmFjaywuLi5hcmdzKXtcblx0XHRsZXQganNvbiA9IFtdO1xuXHRcdGxldCBwcm9kQXJyYXkgPSB0aGlzLl9wcm9kdWN0QXJyYXlbJ0BncmFwaCddO1xuXHRcdGlmIChwcm9kQXJyYXkubGVuZ3RoICE9PSAwKSB7XG5cdFx0XHRcdC8vZmlsdGVyIG91dCBieSBzdGFydCBkYXRlXG5cdFx0XHRpZiAodGhpcy5fc3RhcnREYXRlKSB7IFxuXHRcdFx0XHRwcm9kQXJyYXkgPSBwcm9kQXJyYXkuZmlsdGVyKCBwcm9kdWN0ID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fc3RhcnREYXRlIDwgbmV3IERhdGUocHJvZHVjdC5pc3N1YW5jZVRpbWUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLl9lbmREYXRlKSB7IFxuXHRcdFx0XHRwcm9kQXJyYXkgPSBwcm9kQXJyYXkuZmlsdGVyKCBwcm9kdWN0ID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fZW5kRGF0ZSA+IG5ldyBEYXRlKHByb2R1Y3QuaXNzdWFuY2VUaW1lKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVx0XHRcdFxuXHRcdFx0Ly9zbGljZSBvZmYgYW55IGV4dHJhIGlmIGEgbGltaXQgaXMgc2V0LlxuXHRcdFx0aWYgKHRoaXMuX2xpbWl0KSB7IHByb2RBcnJheSA9IHByb2RBcnJheS5zbGljZSgwLHRoaXMuX2xpbWl0ICl9XG5cblx0XHRcdGpzb24gPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0cHJvZEFycmF5Lm1hcChhc3luYyBwcm9kID0+IHtcblx0XHRcdFx0XHR2YXIgdXJsID0gcHJvZFsnQGlkJ107XG5cdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpXG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHR9XG5cdFx0aWYgKGNhbGxiYWNrKSAgeyBjYWxsYmFjayhqc29uLC4uLmFyZ3MpOyB9XG5cdFx0ZWxzZSB7IHJldHVybiBqc29uOyB9XG5cdH1cblxuXHRhc3luYyBnZXRQcm9kdWN0c0J5TG9jYXRpb25BbmRUeXBlKGNhbGxiYWNrLC4uLmFyZ3Mpe1xuXHRcdGlmICgodGhpcy5fdHlwZSkgJiYgKHRoaXMuX3dmbykpe1xuXHRcdFx0dmFyIHVybCA9IHRoaXMuX2Jhc2VVcmwrdGhpcy5fcHJvZHVjdHNVcmwrdGhpcy5fdHlwZXNVcmwrJy8nK3RoaXMuX3R5cGUrdGhpcy5fbG9jYXRpb25zVXJsKycvJyt0aGlzLl93Zm9cblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKVxuXHRcdFx0dmFyIGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cdFx0XHRsZXQgcHJvZHVjdHM7XG5cdFx0XHR0aGlzLl9wcm9kdWN0QXJyYXkgPSBqc29uO1xuXG5cdFx0XHRpZiAodGhpcy5faWR4ICE9PSBmYWxzZSkgeyAgcHJvZHVjdHMgPSBhd2FpdCB0aGlzLmJ5SW5kZXgoKSB9XG5cdFx0XHRlbHNlIHsgcHJvZHVjdHMgPSBhd2FpdCB0aGlzLmJ5U3Vic2V0KCkgfVxuXHRcdFx0aWYgKGNhbGxiYWNrKSB7IGNhbGxiYWNrKHByb2R1Y3RzLC4uLmFyZ3MpOyB9XG5cdFx0XHRlbHNlIHsgcmV0dXJuIHByb2R1Y3RzOyB9XG5cdFx0fVxuXHRcdGVsc2UgeyByZXR1cm4gZmFsc2U7IH1cblx0fVxufSIsIlxuLy9pbXBvcnQgJy4vaW5kZXguaHRtbCc7XG5cblxuaW1wb3J0IEFsZXJ0cyBmcm9tICcuL2pzL0FsZXJ0cy5qcyc7XG5pbXBvcnQgRm9yZWNhc3RzIGZyb20gJy4vanMvRm9yZWNhc3RzLmpzJztcbmltcG9ydCBQcm9kdWN0cyBmcm9tICcuL2pzL1Byb2R1Y3RzLmpzJztcbmNvbnNvbGUubG9nKEFsZXJ0cyk7XG5jb25zb2xlLmxvZygnVEVTVDEnKTtcbmNvbnNvbGUubG9nKG5ldyBBbGVydHMoKSk7XG5jb25zb2xlLmxvZygnVEVTVDInKTtcbmV4cG9ydCB7QWxlcnRzLCBGb3JlY2FzdHMsIFByb2R1Y3RzfTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3OCk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=